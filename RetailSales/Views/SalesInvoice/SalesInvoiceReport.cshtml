@model RetailSales.Models.SalesInvoiceReport

@{
    Layout = "_PopupLayout";
    ViewData["Title"] = "SalesInvoice Report";
}
<style>
    .mandatory {
        color: red;
        position: relative;
        top: 2px;
        left: 5px;
    }
</style>
<script type="text/javascript">
    @if (TempData["notice"] != null)
    {
        @:alert('@TempData["notice"]');
    }
</script>
@**@

<div class="container">


    <div class="row">
        <div class="col-sm-12 text-left mt-3">
            <button class="btn btn-outline-success me-2" type="button" onclick="printInvoice()">Print</button>
            <button class="btn btn-outline-primary me-2" type="button" onclick="myFunction()">PDF</button>
            <button class="btn btn-outline-secondary me-2" type="button" causesvalidation="false" onClick="window.parent.jQuery.fancybox.close();">Close</button>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-sm-12">
            <div class="card">
                <div class="card-body">
                    <div class="invoice">

                        @using (Html.BeginForm("SalesInvoiceReport", "SalesInvoice", FormMethod.Post))
                        {
                            @Html.AntiForgeryToken()
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="media">
                                    </div>
                                    <!-- End Info-->
                                </div>
                                <div class="col-sm-6">
                                    <div class="text-md-end ">
                                        <p>
                                            <h5 class="media-heading">Invoice NO : @Html.DisplayFor(C => C.InvNo)</h5>
                                            <h5 class="media-heading"> Invoice Date : @Html.DisplayFor(C => C.InvDate)</h5>

                                        </p>

                                    </div>
                                    <!-- End Title-->
                                </div>
                            </div>
                            <hr>
                            <!-- End InvoiceTop-->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="media">
                                        @*  <div class="media-left"><img class="media-object rounded-circle img-60" src="../assets/images/user/1.jpg" alt=""></div> *@
                                        @* <label for="inputName3" class="col-sm-5 control-label"><strong>PO No :</strong><label class="mandatory"></label></label> *@

                                        @Html.HiddenFor(C => C.ID)

                                        <div class="media-body m-l-20">
                                            <h4 class="media-heading">V.A.M. Rathinam And Brothers</h4>
                                            <p>
                                                35,Fort Main Road,Shevapet,Salem-636002<br>
                                                <strong>GSTIN/UIN : </strong>33AACFV2120N1ZC<br>
                                                <strong>State Name: </strong>Tamil Nadu,Code:33<br>
                                                <span><strong>Contact : </strong>97902 33393</span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    
                                            <p>
                                                @* <h4 class="media-heading">@Html.DisplayFor(C => C.CustomerName)</h4>
                                                @Html.DisplayFor(C => C.CustomerAdd)<br /> *@
                                                <strong>Customer Name : </strong>@Html.DisplayFor(C => C.CustomerName)<br />
                                                <strong>Customer Address : </strong>@Html.DisplayFor(C => C.CustomerAdd)<br />
                                                <strong>Phone No : </strong>@Html.DisplayFor(C => C.CustomerPhNo)
                                            </p>
                                        
                                </div>
                            </div>
                            <!-- End Invoice Mid-->
                            
                            <div>
                                <div class="table-responsive invoice-table custom-scrollbar" id="table">
                                    <table class="table table-bordered table-striped">
                                        <thead>
                                            <tr>

                                                <th>Item</th>
                                                <th>HSN/SAC</th>
                                                <th> Quantity </th>
                                                <th>Rate (₹)</th>
                                                <th>Per</th>
                                                <th>Discount (%) </th>
                                                <th> Amount </th>
                                            </tr>
                                        </thead>

                                        <tbody>
                                            @{
                                                int i = 0;

                                                foreach (var item in Model.SalesInvoiceReportlst.ToList())
                                                {

                                                    <tr>
                                                        <td>@Html.DisplayFor(o => o.SalesInvoiceReportlst[i].Item)</td>
                                                        <td>@Html.DisplayFor(o => o.SalesInvoiceReportlst[i].HSN)</td>
                                                        <td>@Html.DisplayFor(o => o.SalesInvoiceReportlst[i].Qty)</td>
                                                        <td>@Html.DisplayFor(o => o.SalesInvoiceReportlst[i].Rate)</td>
                                                        <td>@Html.DisplayFor(o => o.SalesInvoiceReportlst[i].Per)</td>
                                                        <td>@Html.DisplayFor(o => o.SalesInvoiceReportlst[i].DiscPercent)</td>
                                                        <td>@Html.DisplayFor(o => o.SalesInvoiceReportlst[i].Total)</td>

                                                    </tr>
                                                    //i = i + 1;
                                                    i++;
                                                }
                                            }

                                        </tbody>
                                    </table>
                                </div>
                                <!-- End Table-->
                                <hr>
                                <div class="row">
                                    <div class="col-md-8">
                                        <div class="text-md-start ">
                                            <p>
                                                <strong>Amount In Words :</strong><br />
                                                @Html.DisplayFor(C => C.AmtInWords)

                                            </p>

                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <strong>Total Amount</strong>
                                            </div>
                                            <div class="col-md-6">
                                                : @Html.DisplayFor(C => C.TotAmt)<br />
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <strong>Total Discount</strong>
                                            </div>
                                            <div class="col-md-6">
                                                : @Html.DisplayFor(C => C.Discount)<br />
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <strong>Round Off</strong>
                                            </div>
                                            <div class="col-md-6">
                                                : @Html.DisplayFor(C => C.RoundOff)<br />
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <strong>Grand Total</strong>
                                            </div>
                                            <div class="col-md-6">
                                                : @Html.DisplayFor(C => C.PayAmt)<br />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-md-3"></div>
                                    <div class="col-md-9">
                                        <br /><p>This is Computer generated Prescription. Signing is not needed.</p>
                                    </div>
                                </div>
                            </div>
                                
                           
                            <!-- End InvoiceBot-->
                        }


                        <!-- End Invoice-->
                        <!-- End Invoice Holder-->
                        <!-- Container-fluid Ends-->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function printInvoice() {
      const printContents = document.querySelector('.invoice').innerHTML;
      const originalContents = document.body.innerHTML;
      document.body.innerHTML = printContents;
      window.print();
      document.body.innerHTML = originalContents;
    }
</script>
